{"ast":null,"code":"var _jsxFileName = \"/Users/ibrahimfarajzade/Bilkent CTIS/Senior Project/web-portal/src/routes/statistics.js\";\nimport React from \"react\";\nimport Header from \"../components/Header\";\nimport Overlay from \"../components/Overlay\";\nimport { getUserList, parseAllUserData } from \"../javascript/api\";\nimport { Row, Col, Card, message, Skeleton } from \"antd\";\nimport { Doughnut, Bar, Pie, HorizontalBar } from \"react-chartjs-2\"; // const bgColors = [\n//     \"#FF6384\",\n//     \"#36A2EB\",\n//     \"#FFCE56\",\n//     \"#75daad\",\n//     \"#FF6633\",\n//     \"#FFB399\",\n//     \"#ad62aa\",\n//     \"#ed6663\",\n//     \"#05dfd7\",\n//     \"#ffbd69\",\n//     \"#00a8cc\",\n//     \"#ff677d\"\n//   ];\n\nconst bgColors = [\"#FF6384\", \"#36A2EB\", \"#FFCE56\", \"#75daad\", \"#00a8cc\", \"#00a8cc\", \"#00a8cc\", \"#00a8cc\", \"#00a8cc\", \"#00a8cc\", \"#00a8cc\", \"#00a8cc\"];\nconst bgColorsHover = \"#f5e942\";\n\nconst DisplayCard = ({\n  children,\n  title\n}) => {\n  return React.createElement(Card, {\n    style: {\n      width: \"auto\",\n      margin: \"10px\"\n    },\n    title: title,\n    hoverable: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, children);\n};\n\nconst findOccurence = (data, key) => {\n  //ref https://stackoverflow.com/questions/29957390/counting-occurrences-of-object-values\n  const occ = data.reduce(function (sums, entry) {\n    sums[entry[key]] = (sums[entry[key]] || 0) + 1;\n    return sums;\n  }, {});\n  return occ;\n};\n\nconst findAgeOccurence = (data, key) => {\n  const occ = data.reduce(function (sums, entry) {\n    const age = entry[key];\n    const ageRange = age - age % 10;\n    sums[ageRange] = (sums[ageRange] || 0) + 1;\n    return sums;\n  }, {});\n  return occ;\n};\n\nconst findTop = (data, topNum, displayOther, shuffle) => {\n  const findSumFuc = (total, num) => {\n    return total + num;\n  };\n\n  const sum = Object.values(data).reduce(findSumFuc); // inspired by https://stackoverflow.com/questions/1069666/sorting-object-property-by-values\n\n  let keysSorted = Object.keys(data).sort((a, b) => {\n    return data[b] - data[a];\n  });\n  keysSorted = keysSorted.slice(0, topNum);\n\n  if (shuffle) {\n    console.log(keysSorted);\n    keysSorted = keysSorted.sort(function () {\n      return 0.5 - Math.random();\n    });\n    console.log(keysSorted);\n  }\n\n  let topData = {};\n  keysSorted.forEach(element => {\n    topData[element] = data[element];\n  });\n\n  if (displayOther) {\n    const rest = sum - Object.values(topData).reduce(findSumFuc);\n    topData.other = rest;\n  }\n\n  return topData;\n};\n\nclass StatisticsPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.GenderChart = () => {\n      const occ = findOccurence(this.state.patients, \"gender\");\n      console.log(occ);\n      const data = {\n        labels: Object.keys(occ),\n        datasets: [{\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover\n        }]\n      };\n      console.log(occ);\n      return React.createElement(Doughnut, {\n        data: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      });\n    };\n\n    this.CityChart = () => {\n      const occ = findTop(findOccurence(this.state.patients, \"city\"), 5, false, true);\n      console.log(occ);\n      const data = {\n        labels: Object.keys(occ),\n        datasets: [{\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover,\n          label: \"City\"\n        }]\n      };\n      console.log(occ);\n      return React.createElement(Pie, {\n        data: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      });\n    };\n\n    this.LanguageChart = () => {\n      const occ = findTop(findOccurence(this.state.patients, \"language\"), 5, true);\n      console.log(occ);\n      const data = {\n        labels: Object.keys(occ),\n        datasets: [{\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover\n        }]\n      };\n      console.log(occ);\n      return React.createElement(Pie, {\n        data: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      });\n    };\n\n    this.AgeChart = () => {\n      const occ = findTop(findAgeOccurence(this.state.patients, \"age\"), 10, true);\n      console.log(occ);\n      const data = {\n        labels: Object.keys(occ),\n        datasets: [{\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover,\n          label: \"Number of people\"\n        }]\n      };\n      console.log(occ);\n      return React.createElement(Bar, {\n        data: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      });\n    };\n\n    this.MaritalStatusChart = () => {\n      const occ = findOccurence(this.state.patients, \"maritalStatus\");\n      console.log(occ);\n      const data = {\n        labels: Object.keys(occ),\n        datasets: [{\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover,\n          label: \"Number of people\"\n        }]\n      };\n      console.log(occ);\n      return React.createElement(HorizontalBar, {\n        data: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      });\n    };\n\n    this.BirthMonthChart = () => {\n      const occ = findOccurence(this.state.patients, \"birthMonth\");\n      console.log(occ);\n      const data = {\n        labels: Object.keys(occ),\n        datasets: [{\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover,\n          label: \"Number of people\"\n        }]\n      };\n      console.log(occ);\n      return React.createElement(Bar, {\n        data: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      });\n    };\n\n    this.state = {\n      patients: null\n    };\n  }\n\n  async componentDidMount() {\n    let json = await getUserList(message);\n    json = parseAllUserData(json);\n    this.setState({\n      patients: json\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(Overlay, {\n      show: !this.state.patients,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }), React.createElement(Header, {\n      title: \"Statistics\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }), this.state.patients ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"statPadding\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 24,\n      sm: 24,\n      md: 24,\n      lg: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(DisplayCard, {\n      children: this.GenderChart(),\n      title: \"Gender\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: 24,\n      sm: 24,\n      md: 24,\n      lg: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(DisplayCard, {\n      children: this.AgeChart(),\n      title: \"Age Groups\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: 24,\n      sm: 24,\n      md: 24,\n      lg: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(DisplayCard, {\n      children: this.LanguageChart(),\n      title: \"Weekly Statistics\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: 24,\n      sm: 24,\n      md: 24,\n      lg: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, React.createElement(DisplayCard, {\n      children: this.GenderChart(),\n      title: \"Rejected Desks\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: 24,\n      sm: 24,\n      md: 24,\n      lg: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(DisplayCard, {\n      children: this.BirthMonthChart(),\n      title: \"Montly Statistics\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: 24,\n      sm: 24,\n      md: 24,\n      lg: 12,\n      xl: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(DisplayCard, {\n      children: this.CityChart(),\n      title: \"Desks\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    })))) : React.createElement(\"div\", {\n      className: \"statPadding\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(Skeleton, {\n      active: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), React.createElement(Skeleton, {\n      active: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }), React.createElement(Skeleton, {\n      active: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }), React.createElement(Skeleton, {\n      active: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }), React.createElement(Skeleton, {\n      active: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default StatisticsPage;","map":{"version":3,"sources":["/Users/ibrahimfarajzade/Bilkent CTIS/Senior Project/web-portal/src/routes/statistics.js"],"names":["React","Header","Overlay","getUserList","parseAllUserData","Row","Col","Card","message","Skeleton","Doughnut","Bar","Pie","HorizontalBar","bgColors","bgColorsHover","DisplayCard","children","title","width","margin","findOccurence","data","key","occ","reduce","sums","entry","findAgeOccurence","age","ageRange","findTop","topNum","displayOther","shuffle","findSumFuc","total","num","sum","Object","values","keysSorted","keys","sort","a","b","slice","console","log","Math","random","topData","forEach","element","rest","other","StatisticsPage","Component","constructor","props","GenderChart","state","patients","labels","datasets","backgroundColor","hoverBackgroundColor","CityChart","label","LanguageChart","AgeChart","MaritalStatusChart","BirthMonthChart","componentDidMount","json","setState","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,WAAT,EAAsBC,gBAAtB,QAA8C,mBAA9C;AACA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyBC,OAAzB,EAAkCC,QAAlC,QAAkD,MAAlD;AAEA,SAASC,QAAT,EAAmBC,GAAnB,EAAwBC,GAAxB,EAA6BC,aAA7B,QAAkD,iBAAlD,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,QAAQ,GAAG,CACf,SADe,EAEf,SAFe,EAGf,SAHe,EAIf,SAJe,EAKf,SALe,EAMf,SANe,EAOf,SAPe,EAQf,SARe,EASf,SATe,EAUf,SAVe,EAWf,SAXe,EAYf,SAZe,CAAjB;AAcA,MAAMC,aAAa,GAAG,SAAtB;;AAEA,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAAD,KAAyB;AAC3C,SACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEC,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,MAAM,EAAE;AAAzB,KAAb;AAAgD,IAAA,KAAK,EAAEF,KAAvD;AAA8D,IAAA,SAAS,MAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,QADH,CADF;AAKD,CAND;;AAQA,MAAMI,aAAa,GAAG,CAACC,IAAD,EAAOC,GAAP,KAAe;AACnC;AACA,QAAMC,GAAG,GAAGF,IAAI,CAACG,MAAL,CAAY,UAASC,IAAT,EAAeC,KAAf,EAAsB;AAC5CD,IAAAA,IAAI,CAACC,KAAK,CAACJ,GAAD,CAAN,CAAJ,GAAmB,CAACG,IAAI,CAACC,KAAK,CAACJ,GAAD,CAAN,CAAJ,IAAoB,CAArB,IAA0B,CAA7C;AACA,WAAOG,IAAP;AACD,GAHW,EAGT,EAHS,CAAZ;AAIA,SAAOF,GAAP;AACD,CAPD;;AASA,MAAMI,gBAAgB,GAAG,CAACN,IAAD,EAAOC,GAAP,KAAe;AACtC,QAAMC,GAAG,GAAGF,IAAI,CAACG,MAAL,CAAY,UAASC,IAAT,EAAeC,KAAf,EAAsB;AAC5C,UAAME,GAAG,GAAGF,KAAK,CAACJ,GAAD,CAAjB;AACA,UAAMO,QAAQ,GAAGD,GAAG,GAAIA,GAAG,GAAG,EAA9B;AACAH,IAAAA,IAAI,CAACI,QAAD,CAAJ,GAAiB,CAACJ,IAAI,CAACI,QAAD,CAAJ,IAAkB,CAAnB,IAAwB,CAAzC;AACA,WAAOJ,IAAP;AACD,GALW,EAKT,EALS,CAAZ;AAMA,SAAOF,GAAP;AACD,CARD;;AAUA,MAAMO,OAAO,GAAG,CAACT,IAAD,EAAOU,MAAP,EAAeC,YAAf,EAA6BC,OAA7B,KAAyC;AACvD,QAAMC,UAAU,GAAG,CAACC,KAAD,EAAQC,GAAR,KAAgB;AACjC,WAAOD,KAAK,GAAGC,GAAf;AACD,GAFD;;AAGA,QAAMC,GAAG,GAAGC,MAAM,CAACC,MAAP,CAAclB,IAAd,EAAoBG,MAApB,CAA2BU,UAA3B,CAAZ,CAJuD,CAKvD;;AACA,MAAIM,UAAU,GAAGF,MAAM,CAACG,IAAP,CAAYpB,IAAZ,EAAkBqB,IAAlB,CAAuB,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAChD,WAAOvB,IAAI,CAACuB,CAAD,CAAJ,GAAUvB,IAAI,CAACsB,CAAD,CAArB;AACD,GAFgB,CAAjB;AAGAH,EAAAA,UAAU,GAAGA,UAAU,CAACK,KAAX,CAAiB,CAAjB,EAAoBd,MAApB,CAAb;;AACA,MAAIE,OAAJ,EAAa;AACXa,IAAAA,OAAO,CAACC,GAAR,CAAYP,UAAZ;AACAA,IAAAA,UAAU,GAAGA,UAAU,CAACE,IAAX,CAAgB,YAAW;AACtC,aAAO,MAAMM,IAAI,CAACC,MAAL,EAAb;AACD,KAFY,CAAb;AAGAH,IAAAA,OAAO,CAACC,GAAR,CAAYP,UAAZ;AACD;;AACD,MAAIU,OAAO,GAAG,EAAd;AACAV,EAAAA,UAAU,CAACW,OAAX,CAAmBC,OAAO,IAAI;AAC5BF,IAAAA,OAAO,CAACE,OAAD,CAAP,GAAmB/B,IAAI,CAAC+B,OAAD,CAAvB;AACD,GAFD;;AAGA,MAAIpB,YAAJ,EAAkB;AAChB,UAAMqB,IAAI,GAAGhB,GAAG,GAAGC,MAAM,CAACC,MAAP,CAAcW,OAAd,EAAuB1B,MAAvB,CAA8BU,UAA9B,CAAnB;AACAgB,IAAAA,OAAO,CAACI,KAAR,GAAgBD,IAAhB;AACD;;AACD,SAAOH,OAAP;AACD,CA1BD;;AA4BA,MAAMK,cAAN,SAA6BxD,KAAK,CAACyD,SAAnC,CAA6C;AAC3CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAgBnBC,WAhBmB,GAgBL,MAAM;AAClB,YAAMpC,GAAG,GAAGH,aAAa,CAAC,KAAKwC,KAAL,CAAWC,QAAZ,EAAsB,QAAtB,CAAzB;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,YAAMF,IAAI,GAAG;AACXyC,QAAAA,MAAM,EAAExB,MAAM,CAACG,IAAP,CAAYlB,GAAZ,CADG;AAEXwC,QAAAA,QAAQ,EAAE,CACR;AACE1C,UAAAA,IAAI,EAAEiB,MAAM,CAACC,MAAP,CAAchB,GAAd,CADR;AAEEyC,UAAAA,eAAe,EAAEnD,QAFnB;AAGEoD,UAAAA,oBAAoB,EAAEnD;AAHxB,SADQ;AAFC,OAAb;AAUAgC,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,aAAO,oBAAC,QAAD;AAAU,QAAA,IAAI,EAAEF,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KA/BkB;;AAAA,SAiCnB6C,SAjCmB,GAiCP,MAAM;AAChB,YAAM3C,GAAG,GAAGO,OAAO,CAACV,aAAa,CAAC,KAAKwC,KAAL,CAAWC,QAAZ,EAAsB,MAAtB,CAAd,EAA6C,CAA7C,EAAgD,KAAhD,EAAuD,IAAvD,CAAnB;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,YAAMF,IAAI,GAAG;AACXyC,QAAAA,MAAM,EAAExB,MAAM,CAACG,IAAP,CAAYlB,GAAZ,CADG;AAEXwC,QAAAA,QAAQ,EAAE,CACR;AACE1C,UAAAA,IAAI,EAAEiB,MAAM,CAACC,MAAP,CAAchB,GAAd,CADR;AAEEyC,UAAAA,eAAe,EAAEnD,QAFnB;AAGEoD,UAAAA,oBAAoB,EAAEnD,aAHxB;AAIEqD,UAAAA,KAAK,EAAE;AAJT,SADQ;AAFC,OAAb;AAWArB,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,aAAO,oBAAC,GAAD;AAAK,QAAA,IAAI,EAAEF,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAjDkB;;AAAA,SAmDnB+C,aAnDmB,GAmDH,MAAM;AACpB,YAAM7C,GAAG,GAAGO,OAAO,CAACV,aAAa,CAAC,KAAKwC,KAAL,CAAWC,QAAZ,EAAsB,UAAtB,CAAd,EAAiD,CAAjD,EAAoD,IAApD,CAAnB;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,YAAMF,IAAI,GAAG;AACXyC,QAAAA,MAAM,EAAExB,MAAM,CAACG,IAAP,CAAYlB,GAAZ,CADG;AAEXwC,QAAAA,QAAQ,EAAE,CACR;AACE1C,UAAAA,IAAI,EAAEiB,MAAM,CAACC,MAAP,CAAchB,GAAd,CADR;AAEEyC,UAAAA,eAAe,EAAEnD,QAFnB;AAGEoD,UAAAA,oBAAoB,EAAEnD;AAHxB,SADQ;AAFC,OAAb;AAUAgC,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,aAAO,oBAAC,GAAD;AAAK,QAAA,IAAI,EAAEF,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAlEkB;;AAAA,SAoEnBgD,QApEmB,GAoER,MAAM;AACf,YAAM9C,GAAG,GAAGO,OAAO,CAACH,gBAAgB,CAAC,KAAKiC,KAAL,CAAWC,QAAZ,EAAsB,KAAtB,CAAjB,EAA+C,EAA/C,EAAmD,IAAnD,CAAnB;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,YAAMF,IAAI,GAAG;AACXyC,QAAAA,MAAM,EAAExB,MAAM,CAACG,IAAP,CAAYlB,GAAZ,CADG;AAEXwC,QAAAA,QAAQ,EAAE,CACR;AACE1C,UAAAA,IAAI,EAAEiB,MAAM,CAACC,MAAP,CAAchB,GAAd,CADR;AAEEyC,UAAAA,eAAe,EAAEnD,QAFnB;AAGEoD,UAAAA,oBAAoB,EAAEnD,aAHxB;AAIEqD,UAAAA,KAAK,EAAE;AAJT,SADQ;AAFC,OAAb;AAWArB,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,aAAO,oBAAC,GAAD;AAAK,QAAA,IAAI,EAAEF,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KApFkB;;AAAA,SAsFnBiD,kBAtFmB,GAsFE,MAAM;AACzB,YAAM/C,GAAG,GAAGH,aAAa,CAAC,KAAKwC,KAAL,CAAWC,QAAZ,EAAsB,eAAtB,CAAzB;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,YAAMF,IAAI,GAAG;AACXyC,QAAAA,MAAM,EAAExB,MAAM,CAACG,IAAP,CAAYlB,GAAZ,CADG;AAEXwC,QAAAA,QAAQ,EAAE,CACR;AACE1C,UAAAA,IAAI,EAAEiB,MAAM,CAACC,MAAP,CAAchB,GAAd,CADR;AAEEyC,UAAAA,eAAe,EAAEnD,QAFnB;AAGEoD,UAAAA,oBAAoB,EAAEnD,aAHxB;AAIEqD,UAAAA,KAAK,EAAE;AAJT,SADQ;AAFC,OAAb;AAWArB,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,aAAO,oBAAC,aAAD;AAAe,QAAA,IAAI,EAAEF,IAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAtGkB;;AAAA,SAwGnBkD,eAxGmB,GAwGD,MAAM;AACtB,YAAMhD,GAAG,GAAGH,aAAa,CAAC,KAAKwC,KAAL,CAAWC,QAAZ,EAAsB,YAAtB,CAAzB;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,YAAMF,IAAI,GAAG;AACXyC,QAAAA,MAAM,EAAExB,MAAM,CAACG,IAAP,CAAYlB,GAAZ,CADG;AAEXwC,QAAAA,QAAQ,EAAE,CACR;AACE1C,UAAAA,IAAI,EAAEiB,MAAM,CAACC,MAAP,CAAchB,GAAd,CADR;AAEEyC,UAAAA,eAAe,EAAEnD,QAFnB;AAGEoD,UAAAA,oBAAoB,EAAEnD,aAHxB;AAIEqD,UAAAA,KAAK,EAAE;AAJT,SADQ;AAFC,OAAb;AAWArB,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACA,aAAO,oBAAC,GAAD;AAAK,QAAA,IAAI,EAAEF,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAxHkB;;AAEjB,SAAKuC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE;AADC,KAAb;AAGD;;AAED,QAAMW,iBAAN,GAA0B;AACxB,QAAIC,IAAI,GAAG,MAAMvE,WAAW,CAACK,OAAD,CAA5B;AACAkE,IAAAA,IAAI,GAAGtE,gBAAgB,CAACsE,IAAD,CAAvB;AAEA,SAAKC,QAAL,CAAc;AACZb,MAAAA,QAAQ,EAAEY;AADE,KAAd;AAGD;;AA4GDE,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,OAAD;AAAS,MAAA,IAAI,EAAE,CAAC,KAAKf,KAAL,CAAWC,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,MAAD;AAAQ,MAAA,KAAK,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGG,KAAKD,KAAL,CAAWC,QAAX,GACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,EAAT;AAAa,MAAA,EAAE,EAAE,EAAjB;AAAqB,MAAA,EAAE,EAAE,EAAzB;AAA6B,MAAA,EAAE,EAAE,EAAjC;AAAqC,MAAA,EAAE,EAAE,EAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AAAa,MAAA,QAAQ,EAAE,KAAKF,WAAL,EAAvB;AAA2C,MAAA,KAAK,EAAC,QAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,EAIE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,EAAT;AAAa,MAAA,EAAE,EAAE,EAAjB;AAAqB,MAAA,EAAE,EAAE,EAAzB;AAA6B,MAAA,EAAE,EAAE,EAAjC;AAAqC,MAAA,EAAE,EAAE,EAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AAAa,MAAA,QAAQ,EAAE,KAAKU,QAAL,EAAvB;AAAwC,MAAA,KAAK,EAAC,YAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAJF,EAOE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,EAAT;AAAa,MAAA,EAAE,EAAE,EAAjB;AAAqB,MAAA,EAAE,EAAE,EAAzB;AAA6B,MAAA,EAAE,EAAE,EAAjC;AAAqC,MAAA,EAAE,EAAE,EAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AAAa,MAAA,QAAQ,EAAE,KAAKD,aAAL,EAAvB;AAA6C,MAAA,KAAK,EAAC,mBAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAPF,EAUE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,EAAT;AAAa,MAAA,EAAE,EAAE,EAAjB;AAAqB,MAAA,EAAE,EAAE,EAAzB;AAA6B,MAAA,EAAE,EAAE,EAAjC;AAAqC,MAAA,EAAE,EAAE,EAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AACE,MAAA,QAAQ,EAAE,KAAKT,WAAL,EADZ;AAEE,MAAA,KAAK,EAAC,gBAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAVF,EAgBE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,EAAT;AAAa,MAAA,EAAE,EAAE,EAAjB;AAAqB,MAAA,EAAE,EAAE,EAAzB;AAA6B,MAAA,EAAE,EAAE,EAAjC;AAAqC,MAAA,EAAE,EAAE,EAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AAAa,MAAA,QAAQ,EAAE,KAAKY,eAAL,EAAvB;AAA+C,MAAA,KAAK,EAAC,mBAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAhBF,EAmBE,oBAAC,GAAD;AAAK,MAAA,EAAE,EAAE,EAAT;AAAa,MAAA,EAAE,EAAE,EAAjB;AAAqB,MAAA,EAAE,EAAE,EAAzB;AAA6B,MAAA,EAAE,EAAE,EAAjC;AAAqC,MAAA,EAAE,EAAE,EAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AAAa,MAAA,QAAQ,EAAE,KAAKL,SAAL,EAAvB;AAAyC,MAAA,KAAK,EAAC,OAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAnBF,CADF,CADD,GA2BC;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,QAAD;AAAU,MAAA,MAAM,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,QAAD;AAAU,MAAA,MAAM,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE,oBAAC,QAAD;AAAU,MAAA,MAAM,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,EAIE,oBAAC,QAAD;AAAU,MAAA,MAAM,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,EAKE,oBAAC,QAAD;AAAU,MAAA,MAAM,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,CA9BJ,CADF;AAyCD;;AArK0C;;AAwK7C,eAAeX,cAAf","sourcesContent":["import React from \"react\";\nimport Header from \"../components/Header\";\nimport Overlay from \"../components/Overlay\";\nimport { getUserList, parseAllUserData } from \"../javascript/api\";\nimport { Row, Col, Card, message, Skeleton } from \"antd\";\n\nimport { Doughnut, Bar, Pie, HorizontalBar } from \"react-chartjs-2\";\n\n// const bgColors = [\n//     \"#FF6384\",\n//     \"#36A2EB\",\n//     \"#FFCE56\",\n//     \"#75daad\",\n//     \"#FF6633\",\n//     \"#FFB399\",\n//     \"#ad62aa\",\n//     \"#ed6663\",\n//     \"#05dfd7\",\n//     \"#ffbd69\",\n//     \"#00a8cc\",\n//     \"#ff677d\"\n//   ];\nconst bgColors = [\n  \"#FF6384\",\n  \"#36A2EB\",\n  \"#FFCE56\",\n  \"#75daad\",\n  \"#00a8cc\",\n  \"#00a8cc\",\n  \"#00a8cc\",\n  \"#00a8cc\",\n  \"#00a8cc\",\n  \"#00a8cc\",\n  \"#00a8cc\",\n  \"#00a8cc\"\n];\nconst bgColorsHover = \"#f5e942\";\n\nconst DisplayCard = ({ children, title }) => {\n  return (\n    <Card style={{ width: \"auto\", margin: \"10px\" }} title={title} hoverable>\n      {children}\n    </Card>\n  );\n};\n\nconst findOccurence = (data, key) => {\n  //ref https://stackoverflow.com/questions/29957390/counting-occurrences-of-object-values\n  const occ = data.reduce(function(sums, entry) {\n    sums[entry[key]] = (sums[entry[key]] || 0) + 1;\n    return sums;\n  }, {});\n  return occ;\n};\n\nconst findAgeOccurence = (data, key) => {\n  const occ = data.reduce(function(sums, entry) {\n    const age = entry[key];\n    const ageRange = age - (age % 10);\n    sums[ageRange] = (sums[ageRange] || 0) + 1;\n    return sums;\n  }, {});\n  return occ;\n};\n\nconst findTop = (data, topNum, displayOther, shuffle) => {\n  const findSumFuc = (total, num) => {\n    return total + num;\n  };\n  const sum = Object.values(data).reduce(findSumFuc);\n  // inspired by https://stackoverflow.com/questions/1069666/sorting-object-property-by-values\n  let keysSorted = Object.keys(data).sort((a, b) => {\n    return data[b] - data[a];\n  });\n  keysSorted = keysSorted.slice(0, topNum);\n  if (shuffle) {\n    console.log(keysSorted);\n    keysSorted = keysSorted.sort(function() {\n      return 0.5 - Math.random();\n    });\n    console.log(keysSorted);\n  }\n  let topData = {};\n  keysSorted.forEach(element => {\n    topData[element] = data[element];\n  });\n  if (displayOther) {\n    const rest = sum - Object.values(topData).reduce(findSumFuc);\n    topData.other = rest;\n  }\n  return topData;\n};\n\nclass StatisticsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      patients: null\n    };\n  }\n\n  async componentDidMount() {\n    let json = await getUserList(message);\n    json = parseAllUserData(json);\n\n    this.setState({\n      patients: json\n    });\n  }\n\n  GenderChart = () => {\n    const occ = findOccurence(this.state.patients, \"gender\");\n    console.log(occ);\n    const data = {\n      labels: Object.keys(occ),\n      datasets: [\n        {\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover\n        }\n      ]\n    };\n    console.log(occ);\n    return <Doughnut data={data} />;\n  };\n\n  CityChart = () => {\n    const occ = findTop(findOccurence(this.state.patients, \"city\"), 5, false, true);\n    console.log(occ);\n    const data = {\n      labels: Object.keys(occ),\n      datasets: [\n        {\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover,\n          label: \"City\"\n        }\n      ]\n    };\n    console.log(occ);\n    return <Pie data={data} />;\n  };\n\n  LanguageChart = () => {\n    const occ = findTop(findOccurence(this.state.patients, \"language\"), 5, true);\n    console.log(occ);\n    const data = {\n      labels: Object.keys(occ),\n      datasets: [\n        {\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover\n        }\n      ]\n    };\n    console.log(occ);\n    return <Pie data={data} />;\n  };\n\n  AgeChart = () => {\n    const occ = findTop(findAgeOccurence(this.state.patients, \"age\"), 10, true);\n    console.log(occ);\n    const data = {\n      labels: Object.keys(occ),\n      datasets: [\n        {\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover,\n          label: \"Number of people\"\n        }\n      ]\n    };\n    console.log(occ);\n    return <Bar data={data} />;\n  };\n\n  MaritalStatusChart = () => {\n    const occ = findOccurence(this.state.patients, \"maritalStatus\");\n    console.log(occ);\n    const data = {\n      labels: Object.keys(occ),\n      datasets: [\n        {\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover,\n          label: \"Number of people\"\n        }\n      ]\n    };\n    console.log(occ);\n    return <HorizontalBar data={data} />;\n  };\n\n  BirthMonthChart = () => {\n    const occ = findOccurence(this.state.patients, \"birthMonth\");\n    console.log(occ);\n    const data = {\n      labels: Object.keys(occ),\n      datasets: [\n        {\n          data: Object.values(occ),\n          backgroundColor: bgColors,\n          hoverBackgroundColor: bgColorsHover,\n          label: \"Number of people\"\n        }\n      ]\n    };\n    console.log(occ);\n    return <Bar data={data} />;\n  };\n\n  render() {\n    return (\n      <div>\n        <Overlay show={!this.state.patients}></Overlay>\n        <Header title=\"Statistics\"></Header>\n        {this.state.patients ? (\n          <div>\n            <Row className=\"statPadding\">\n              <Col xs={24} sm={24} md={24} lg={12} xl={12}>\n                <DisplayCard children={this.GenderChart()} title=\"Gender\"></DisplayCard>\n              </Col>\n              <Col xs={24} sm={24} md={24} lg={12} xl={12}>\n                <DisplayCard children={this.AgeChart()} title=\"Age Groups\"></DisplayCard>\n              </Col>\n              <Col xs={24} sm={24} md={24} lg={12} xl={12}>\n                <DisplayCard children={this.LanguageChart()} title=\"Weekly Statistics\"></DisplayCard>\n              </Col>\n              <Col xs={24} sm={24} md={24} lg={12} xl={12}>\n                <DisplayCard\n                  children={this.GenderChart()}\n                  title=\"Rejected Desks\"\n                ></DisplayCard>\n              </Col>\n              <Col xs={24} sm={24} md={24} lg={12} xl={12}>\n                <DisplayCard children={this.BirthMonthChart()} title=\"Montly Statistics\"></DisplayCard>\n              </Col>\n              <Col xs={24} sm={24} md={24} lg={12} xl={12}>\n                <DisplayCard children={this.CityChart()} title=\"Desks\"></DisplayCard>\n              </Col>\n            </Row>\n          </div>\n        ) : (\n          <div className=\"statPadding\">\n            <Skeleton active />\n            <Skeleton active />\n            <Skeleton active />\n            <Skeleton active />\n            <Skeleton active />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default StatisticsPage;\n"]},"metadata":{},"sourceType":"module"}